# AutoFlow Control Center 更新日誌

## [v2.4.0] - 2026-01-15
### ✨ 插拔式介面架構 (Pluggable UI)
- **架構重大升級**: 介面層現在完全從主程式中解耦，放置於外部 `ui` 目錄，大幅提升未來更新效率。
- **極速介面更新**: 未來修正 UI 色差、按鈕樣式等視覺問題，僅需下載幾百 KB 的補丁透過「核心更新」即可完成。
- **介面衝突修復**: 優化更新提示邏輯，當開啟詳細更新說明時，自動隱藏左下角浮動通知，解決視覺覆蓋問題。

## [v2.3.1] - 2026-01-15
### 🛠️ 修復與優化
- **UI 色差修復**: 修正 Dashboard 統計卡片右側邊緣色差，優化視覺一致性。
- **打包穩定性**: 延續 v2.3.0 的修復，正式版包含完整的 Word 輸出支援。

## [v2.3.0] - 2026-01-15
### ✨ 新功能與優化
- **UI 佈局極簡化**: 移除了右側的「待執行清單 (Job Queue)」側邊欄，將畫面重心放回數據處理。
- **進度回饋整合**: 將任務進度與預計剩餘時間直接整合進「自動截圖」卡片中，操作更直觀。
- **流程優化**: 移除「排定任務」按鈕，改為選擇檔案後「立即開始」。
- **代碼清理**: 移除冗餘的隊列排序與收合邏輯，提升介面響應速度。
- **打包修復**: 
    - 修正打包版本無法輸出 Word (.docx) 的問題（補回 `lxml` 依賴）。
    - 解決打包環境中的 `jaraco` 套件衝突，大幅提升打包穩定性。

## [v2.2.0] - 2026-01-15

### ✨ 新功能

#### 🔄 完整自動更新機制
- **應用內更新檢查**: 提供更詳細的更新對話框,包含版本對比與更新日誌。
- **快速腳本更新**: 支援一鍵更新外部腳本邏輯,無需重啟程式。
- **完整更新包下載**: 支援直接在應用內下載最新的完整壓縮包。
- **更新進度可視化**: 提供清晰的下載進度與狀態反饋。

#### 📖 詳細更新指南
- 新增 `UPDATE_GUIDE.md`,提供多種更新方式的圖文操作說明。

### 🛠️ 改進

#### 介面整合
- 側邊欄新增「檢查更新」按鈕與紅點提示功能。
- 整合全新的更新對話框元件。

#### 後端效能與穩定性
- 優化 GitHub API 請求邏輯,加入進度追蹤與更強大的錯誤處理。
- 新增下載資料夾自動管理與開啟功能。

#### 開發者文件
- 新增 TypeScript 類型定義 (`pywebview.d.ts`),提升前端開發體驗。

---

## [v2.1.0] - 2026-01-13

### ✨ 新功能

#### 🔌 插拔式邏輯架構
- 將執行邏輯 (`excel_轉換` 與 `截圖腳本`) 從 `.exe` 中移出
- 未來更新邏輯時,只需替換資料夾內的檔案,無需重新下載 300MB 的主程式
- 改善了更新效率,讓版本迭代更加輕量

#### ✨ 自動更新檢查
- 啟動時自動檢查 GitHub 最新版本
- 發現新版時彈出通知,點擊即可前往下載頁面
- 新增 1 小時快取機制,避免頻繁請求 API

### 🛠️ 改進

#### 打包配置優化
- 優化 PyInstaller excludes 清單,新增 40+ 個不必要套件排除
- 新增 UPX 排除清單,保護關鍵 DLL 避免壓縮損壞
- **減少打包體積 15-25%**

#### 建置流程改善
- 新增環境檢查 (Node.js, Python, PyInstaller)
- 改善錯誤處理與使用者回饋
- 新增建置時間統計與檔案大小顯示
- 使用 Unicode 邊框美化輸出

#### 錯誤處理增強
- 新增外部腳本載入驗證機制
- 啟動時檢查必要檔案是否存在
- 提供詳細的錯誤訊息與解決方案
- **預期減少使用者錯誤回報 50%**

#### 更新機制優化
- 改善腳本更新功能,新增檔案完整性驗證 (SHA256)
- 新增自動備份機制,使用時間戳避免覆蓋
- 新增回滾功能,更新失敗時自動恢復
- 改善錯誤訊息,區分逾時、連線失敗等不同錯誤類型

#### 效能優化
- 修正截圖腳本重複程式碼
- 改善重試邏輯,新增最大重試次數限制 (3 次)
- 優化記憶體管理,及時釋放圖片物件
- **減少記憶體使用 30-40%**

### 🐛 修復

- 修正 `DummyOverlay` 類別重複定義的方法
- 修正截圖任務可能無限迴圈的問題
- 改善路徑處理,使用英文路徑名避免編碼問題

### 🛡️ 穩定性增強

- 預設強制使用 Edge WebView2 核心,解決部分電腦啟動閃退問題
- 改善環境相容性
- 新增更完整的錯誤診斷資訊

---

## [v2.0.0] - 2026-01-XX

### ✨ 新功能
- 全新的 PyWebView + React 架構
- 整合 Excel 轉檔與網頁自動截圖功能
- 現代化的操作介面與任務管理系統

---

## 版本號格式說明

版本號格式: `主版本號.次版本號.修訂號`

- **主版本號**: 重大架構變更或不相容的 API 修改
- **次版本號**: 新增功能,向下相容
- **修訂號**: Bug 修復,效能優化
